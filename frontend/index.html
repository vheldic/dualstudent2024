<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customers Sales 2021-2022</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Vue CDN Link -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        .content {
            background-color: rgb(200, 200, 200);
            margin: auto;
            padding: 100px 100px 300px 100px;
        }

        .content .title {
            text-align: center;
            margin-bottom: 30px;
        }

        .header {
            display: flex;
        }
    </style>
</head>

<body>
    <div id="app" class="content">

        <h1 class="title">{{ title }}</h1>
        <div class="header">
            <div class="input-group mb-2">
                <select v-model="searchby" class="form-select" id="inputGroupSelect01">
                    <option v-for="table_column in table_column_names">{{ table_column }}</option>
                </select>
                <input type="text" placeholder="Search for ..." v-model="searchtext" class="form-control">
            </div>
            <!-- Search Button -->
            <div class="d-grid gap-2 d-md-block mb-2 mx-2">
                <button v-on:click="search()" class="btn btn-primary" type="button">Search</button>
            </div>
            <!-- Sort by name Button -->
            <div class="d-grid gap-2 d-md-block mb-2">
                <button v-on:click="sortbyname()" class="btn btn-primary" type="button">
                    Sort by Name
                    <svg v-if="orderby == 'ASC'" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                        fill="currentColor" class="bi bi-sort-alpha-down" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371zm1.57-.785L11 2.687h-.047l-.652 2.157z" />
                        <path
                            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z" />
                    </svg>
                    <svg v-else xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-sort-alpha-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371zm1.57-.785L11 2.687h-.047l-.652 2.157z" />
                        <path
                            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.5.5 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707z" />
                    </svg>
                </button>
            </div>
        </div>

        <table id="myTable" class="table">
            <thead>
                <tr>
                    <th v-for="table_column in table_column_names" scope="col">{{ table_column }}</th>
                </tr>
            </thead>
            <tbody class="myTableBody">
                <tr v-for="row in data">
                    <td v-for="value in row">{{ value }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

<script>
    const app = Vue.createApp({
        data() {
            return {
                title: "Customers Sales 2021-2021",
                searchby: "Index",
                searchtext: "",
                orderby: "ASC",
                table_column_names: [
                    "Index",
                    "Customer Id",
                    "First Name",
                    "Last Name",
                    "Company",
                    "City",
                    "Country",
                    "Phone 1",
                    "Phone 2",
                    "Email", "Subscription Date",
                    "Website",
                    "SALES 2021",
                    "SALES 2022"
                ],
                // data inserted manually
                data: [
                    [
                        "40",
                        "C2378a0b119b425",
                        "Marc",
                        "Medina",
                        "Pearson PLC",
                        "New Petershire",
                        "Japan",
                        "1874666215",
                        "237-063-6496x65292",
                        "karlgarrett@fischer.biz",
                        "02.03.2020",
                        "http://www.nicholson.org/",
                        "79",
                        "864"
                    ],
                    [
                        "41",
                        "53D27CbE3b3CAf7",
                        "Darren",
                        "Santana",
                        "Guerra LLC",
                        "Meyerbury",
                        "French Southern Territories",
                        "+1-145-916-2809x14415",
                        "440.474.1607",
                        "biancahenry@hernandez.org",
                        "11.06.2021",
                        "http://www.gates.net/",
                        "945",
                        "103"
                    ],
                    [
                        "42",
                        "3bcBa3CBB7EF52c",
                        "Mario",
                        "Moreno",
                        "Robles and Sons",
                        "Cathyview",
                        "United States Minor Outlying Islands",
                        "001-044-197-2628x678",
                        "001-592-920-6308x2332",
                        "marisa13@hickman.com",
                        "12.02.2022",
                        "https://www.gillespie.biz/",
                        "403",
                        "226"
                    ],
                    [
                        "43",
                        "DFcebf7063e11ac",
                        "Daniel",
                        "Bush",
                        "Delacruz-Rosario",
                        "West Marthaview",
                        "Bouvet Island (Bouvetoya)",
                        "891.885.1826",
                        "309.937.8982x96964",
                        "billymorris@lambert-irwin.com",
                        "13.02.2020",
                        "http://www.zhang.com/",
                        "724",
                        "523"
                    ],
                    [
                        "44",
                        "fdd4F120dFFaaBA",
                        "Vanessa",
                        "Davenport",
                        "Barrera Group",
                        "South Brandi",
                        "Guinea",
                        "014.539.1066x2855",
                        "001-586-506-1699x536",
                        "barry91@howe.info",
                        "10.05.2020",
                        "https://www.davenport.com/",
                        "15",
                        "375"
                    ],
                    [
                        "45",
                        "FA9584DEE86bBbE",
                        "Donald",
                        "Terry",
                        "Beasley-Perez",
                        "Port Rickeyport",
                        "Isle of Man",
                        "(381)211-7562x9960",
                        "905.051.0894x82461",
                        "kdavies@owen-humphrey.info",
                        "04.01.2021",
                        "http://www.grimes-summers.com/",
                        "187",
                        "812"
                    ],
                    [
                        "46",
                        "fF8bc9C72D6c38b",
                        "Jill",
                        "Esparza",
                        "Herrera and Sons",
                        "Hendricksfort",
                        "Indonesia",
                        "001-218-793-7724x2810",
                        "253.141.8420",
                        "gregghendricks@conner-weiss.info",
                        "24.09.2020",
                        "http://harris.net/",
                        "161",
                        "705"
                    ],
                    [
                        "47",
                        "6ADbBf35FBb6ebc",
                        "Tyler",
                        "Richard",
                        "Cline Inc",
                        "Serranoland",
                        "San Marino",
                        "(030)748-4061",
                        "(518)939-6401",
                        "alfredbradford@perry.com",
                        "17.04.2022",
                        "https://www.delacruz.com/",
                        "337",
                        "868"
                    ],
                    [
                        "48",
                        "a75eDF85cC17DfB",
                        "Sonya",
                        "Moore",
                        "Riggs, Pena and Hubbard",
                        "New Virginiamouth",
                        "Guyana",
                        "488.725.7447x7670",
                        "001-918-561-3514x2980",
                        "ngilmore@bush.net",
                        "25.12.2021",
                        "https://www.tyler.com/",
                        "546",
                        "943"
                    ],
                    [
                        "49",
                        "E95Ce6e2d241660",
                        "Jonathon",
                        "Gillespie",
                        "Harrell Ltd",
                        "West Craig",
                        "Sudan",
                        "(335)620-5477x4774",
                        "353.020.5510",
                        "vgilbert@romero.biz",
                        "23.06.2020",
                        "https://www.long-hickman.com/",
                        "994",
                        "271"
                    ],
                    [
                        "50",
                        "3E4Ac207eAE0d2E",
                        "Ryan",
                        "Lin",
                        "Harrell-Frank",
                        "West Nicolas",
                        "Thailand",
                        "284-076-2518x537",
                        "6934137441",
                        "dgould@graham-winters.com",
                        "06.10.2021",
                        "https://johns-sharp.com/",
                        "904",
                        "198"
                    ],
                    [
                        "51",
                        "cFB0d4B976ef0Ca",
                        "Joel",
                        "Thomas",
                        "Lawrence-Robles",
                        "Paigeland",
                        "Guernsey",
                        "001-566-338-3073",
                        "7104971640",
                        "fsuarez@cooper-montes.biz",
                        "21.10.2021",
                        "http://mcgrath.org/",
                        "99",
                        "153"
                    ],
                    [
                        "52",
                        "a0eb3D0bDcfB8Bd",
                        "Judith",
                        "Fischer",
                        "Oconnor, Glover and Park",
                        "Lake Joshua",
                        "Isle of Man",
                        "6570280667",
                        "001-929-759-1013x923",
                        "natasha83@delacruz-edwards.com",
                        "26.01.2020",
                        "https://spencer.com/",
                        "794",
                        "32"
                    ],
                    [
                        "53",
                        "A8205E5c66709D5",
                        "Roy",
                        "West",
                        "Finley Group",
                        "East Kaitlynfort",
                        "Micronesia",
                        "953.571.7565",
                        "001-400-483-7933",
                        "mbonilla@hampton.com",
                        "22.01.2020",
                        "https://www.lindsey.org/",
                        "146",
                        "914"
                    ],
                    [
                        "54",
                        "047653F3f21E8B3",
                        "Rebekah",
                        "Morton",
                        "Love, Farmer and Reid",
                        "Perezburgh",
                        "Malaysia",
                        "(238)946-3127x901",
                        "248-817-0962x74779",
                        "basskaylee@lynn-gill.biz",
                        "19.08.2021",
                        "https://www.leblanc.com/",
                        "27",
                        "731"
                    ],
                    [
                        "55",
                        "83d9accaD6AFBF9",
                        "Jeremy",
                        "Guerra",
                        "Gamble Group",
                        "South Jeremiahberg",
                        "Nauru",
                        "001-343-604-8248x84492",
                        "142.473.8437x8627",
                        "lfaulkner@villanueva.com",
                        "12.05.2022",
                        "https://giles-newton.com/",
                        "205",
                        "672"
                    ]
                ],
            }
        },
        methods: {
            async search() {
                // console.log(`http://localhost:5000/get_customers_sales_2021_2022?searchby=${this.searchby.toLowerCase().replace(" ", "_")}&search=${this.searchtext}&orderby=${this.orderby}`)
                const res = await fetch(`http://localhost:5000/get_customers_sales_2021_2022?searchby=${this.searchby.toLowerCase().replace(" ", "_")}&search=${this.searchtext}&orderby=${this.orderby}`)
                    .catch((err) => {
                        throw Error("Error while fetching data - " + err);
                    });

                this.data = await res;
            },
            async sortbyname() {
                if (this.orderby == "ASC") this.orderby = "DESC"
                else this.orderby = "ASC";
                await this.search()
            }
        }
    });
    app.mount("#app")
</script>